{% extends "_layout/default.njk" %}

{% block body %}
  {% include "../header.njk" %}

  <section class="container">
    <div class="content-header">
      <h1>{{ info.content_title }}</h1>
      <div class="header-btn">
        <form
          action="/admin/chefs/{{ chef.id }}?_method=DELETE"
          method="POST"
          data-form="delete"
        >
          <button type="submit" class="btn btn-danger">Deletar</button>

          {% include "_partials/confirm_delete.njk" %}
        </form>
        <a href="/admin/chefs/{{ chef.id }}/edit" class="btn btn-primary">Editar chef</a>
      </div>
    </div>

    <div class="chef-bio">
      <div class="avatar">
        <img src="{{ chef.avatar_url }}" alt="{{ chef.name }}" />
      </div>

      <h1>{{ chef.name }}</h1>

      {% if chef.total_recipes > 1 %}
        <span>{{ chef.total_recipes }} receitas</span>
      {% else %}
        <span>{{ chef.total_recipes }} receita</span>
      {% endif %}
    </div>

    <h2>Receitas</h2>

    {% if recipes[0] %}
      <ul class="recipes-list">
        {% for recipe in recipes %}
          <li class="admin-recipe">
            <div class="img">
              <img src="{{ recipe.image_url }}" alt="{{ recipe.title }}" />
            </div>

            <div class="details">
              <p>{{ recipe.title }}</p>
              <span>por {{ chef.name }}</span>
              <a href="/admin/recipes/{{ recipe.id }}">visualizar</a>
            </div>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>Nenhuma receita encontrada</p>
    {% endif %}

  {% if pagination.total > 1 %}
    {% include "_partials/pagination.njk" %}
  {% endif %}
  </section>
{% endblock %}
